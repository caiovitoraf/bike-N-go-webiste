<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bike N' Go - Finalizar Contratação</title>
    <link rel="stylesheet" href="./css/style.css" />
</head>
<body>

<<header class="header">
    <div class="header-logo">
        <a href="index.html">
            <img src="./img/LogoName.svg" alt="Logo Bike N' Go" class="logo-img" />
        </a>
    </div>
    <nav class="header-nav">
        <a href="#" id="theme-switcher" class="nav-icon" title="Mudar Tema">
            <svg
                xmlns="http://www.w3.org/2000/svg"
                width="32"
                height="32"
                viewBox="0 0 24 24"
                fill="none"
                stroke="#eb4b98"
                stroke-width="2.5"
                stroke-linecap="round"
                stroke-linejoin="round"
            >
                <path d="M16.418 4.157a8 8 0 0 0 0 15.686" />
                <path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" />
            </svg>
        </a>
        <a href="vendas.html" class="nav-icon">
            <svg
                xmlns="http://www.w3.org/2000/svg"
                width="32"
                height="32"
                viewBox="0 0 24 24"
                fill="none"
                stroke="#eb4b98"
                stroke-width="2.5"
                stroke-linecap="round"
                stroke-linejoin="round"
            >
                <path d="M6 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" />
                <path d="M17 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" />
                <path d="M17 17h-11v-14h-2" />
                <path d="M6 5l14 1l-1 7h-13" />
            </svg>
        </a>
        <a href="login.html" class="nav-icon">
            <svg
                xmlns="http://www.w3.org/2000/svg"
                width="32"
                height="32"
                viewBox="0 0 24 24"
                fill="none"
                stroke="#eb4b98"
                stroke-width="2.5"
                stroke-linecap="round"
                stroke-linejoin="round"
            >
                <path d="M9 8v-2a2 2 0 0 1 2 -2h7a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-7a2 2 0 0 1 -2 -2v-2" />
                <path d="M3 12h13l-3 -3" />
                <path d="M13 15l3 -3" />
            </svg>
        </a>
        <a href="faq.html" class="nav-icon">
            <svg
                xmlns="http://www.w3.org/2000/svg"
                width="32"
                height="32"
                viewBox="0 0 24 24"
                fill="none"
                stroke="#eb4b98"
                stroke-width="2.5"
                stroke-linecap="round"
                stroke-linejoin="round"
            >
                <path d="M19.875 6.27c.7 .398 1.13 1.143 1.125 1.948v7.284c0 .809 -.443 1.555 -1.158 1.948l-6.75 4.27a2.269 2.269 0 0 1 -2.184 0l-6.75 -4.27a2.225 2.225 0 0 1 -1.158 -1.948v-7.285c0 -.809 .443 -1.554 1.158 -1.947l6.75 -3.98a2.33 2.33 0 0 1 2.25 0l6.75 3.98h-.033z" />
                <path d="M12 16v.01" />
                <path d="M12 13a2 2 0 0 0 .914 -3.782a1.98 1.98 0 0 0 -2.414 .483" />
            </svg>
        </a>
    </nav>
</header>

<main class="main-content">
    <div id="checkout-container" class="checkout-container">
        <h2 id="checkout-title">Carregando seu plano...</h2>
        <p class="subtitle">Confira os detalhes abaixo para finalizar.</p>

        <div class="order-summary">
            <div class="order-line-item">
                <span id="plan-name"></span>
                <span id="plan-price" class="price-highlight"></span>
            </div>
            <hr class="summary-divider">
            <div class="order-line-item total">
                <span>TOTAL</span>
                <span id="total-price" class="price-highlight"></span>
            </div>
        </div>

        <div class="card-details">
            <h3>Benefícios Inclusos</h3>
            <ul id="plan-features">
                </ul>
        </div>

        <a href="index.html" id="confirm-button" class="btn btn-primary">Confirmar Contratação</a>
    </div>

    <div id="login-prompt" class="checkout-container" style="display: none;">
        <h2>Acesso Necessário</h2>
        <p class="subtitle">Você precisa estar logado para acessar esta página.</p>
        <a href="login.html" class="btn btn-primary">Fazer Login</a>
    </div>
</main>

<footer class="footer">
    </footer>

<script src="./js/theme-switcher.js"></script>
<script>
document.addEventListener('DOMContentLoaded', () => {
    // Verifica se o usuário está logado
    if (sessionStorage.getItem('isLoggedIn') !== 'true') {
        document.getElementById('checkout-container').style.display = 'none';
        document.getElementById('login-prompt').style.display = 'flex';
        return; // Para a execução do script se não estiver logado
    }

    // Objeto com os detalhes de todos os planos
    const plansData = {
        avulso_simples: {
            title: "Confirmar Passeio Avulso",
            name: "Passeio Avulso - Simple Bike",
            price: "R$ 5,00",
            features: ["1 Viagem de até 60 minutos", "Acesso às bicicletas padrão", "Ideal para passeios rápidos e sem compromisso"],
            buttonText: "Confirmar Passeio"
        },
        avulso_bolt: {
            title: "Confirmar Passeio Bolt",
            name: "Passeio Avulso - Bolt Bike",
            price: "R$ 7,00",
            features: ["1 Viagem de até 60 minutos", "Acesso às bicicletas elétricas", "Suba ladeiras e vá mais longe sem esforço"],
            buttonText: "Confirmar Passeio"
        },
        mensal_simples: {
            title: "Resumo da sua Assinatura",
            name: "Plano Mensal - Bike N' Go",
            price: "R$ 30,00/mês",
            features: ["Viagens ilimitadas de até 60 minutos", "Acesso a todas as bicicletas padrão", "Estacionamento gratuito nos bolsões BNG", "Custo-benefício para o uso diário"],
            buttonText: "Confirmar Assinatura"
        },
        mensal_bolt: {
            title: "Resumo da sua Assinatura",
            name: "Plano Mensal - Bike Bolt",
            price: "R$ 50,00/mês",
            features: ["Todos os benefícios do plano mensal", "Acesso ilimitado às potentes Bikes Elétricas", "A melhor experiência para explorar a cidade sem limites"],
            buttonText: "Confirmar Assinatura"
        }
    };

    // Pega o parâmetro 'plan' da URL
    const params = new URLSearchParams(window.location.search);
    const planId = params.get('plan');

    // Seleciona os dados do plano correto ou redireciona se o plano for inválido
    const selectedPlan = plansData[planId];
    if (!selectedPlan) {
        alert("Plano inválido! Redirecionando para a página de planos.");
        window.location.href = 'vendas.html';
        return;
    }

    // Atualiza a página com os dados do plano selecionado
    document.getElementById('checkout-title').textContent = selectedPlan.title;
    document.getElementById('plan-name').textContent = selectedPlan.name;
    document.getElementById('plan-price').textContent = selectedPlan.price;
    document.getElementById('total-price').textContent = selectedPlan.price;
    document.getElementById('confirm-button').textContent = selectedPlan.buttonText;

    const featuresList = document.getElementById('plan-features');
    featuresList.innerHTML = ''; // Limpa a lista antes de adicionar
    selectedPlan.features.forEach(feature => {
        const li = document.createElement('li');
        li.innerHTML = `<span class="check-icon">✓</span> ${feature}`;
        featuresList.appendChild(li);
    });
});
</script>

</body>
</html>